<!-- src/ui/objectives.html -->
<div id="hud-objectives">
  <div id="mission-objective">Objective: <span id="objective-text">-</span></div>
</div>

/* src/ui/objectives.css */
#hud-objectives {
  position: fixed;
  top: 2vw;
  right: 4vw;
  z-index: 2002;
  background: rgba(0,0,0,0.35);
  border-radius: 1vw;
  padding: 1vw 2vw;
  color: #fff;
  font-family: 'Orbitron', 'Consolas', monospace;
  font-size: 2vw;
  min-width: 18vw;
  max-width: 40vw;
  box-shadow: 0 0 1vw #003c3c88;
  pointer-events: none;
  user-select: none;
}
#mission-objective {
  font-weight: bold;
  letter-spacing: 0.08em;
}
#objective-text {
  color: #00ffcc;
  font-weight: normal;
}
@media (max-width: 600px) {
  #hud-objectives {
    font-size: 4vw;
    top: 1vw;
    right: 2vw;
    padding: 2vw 3vw;
    min-width: 32vw;
  }
}

// src/ui/objectives.js
/**
 * Mounts the mission objective HUD overlay.
 */
export function mountObjectives() {
  if (!document.getElementById('hud-objectives')) {
    fetch('src/ui/objectives.html')
      .then(res => res.text())
      .then(html => {
        const div = document.createElement('div');
        div.innerHTML = html;
        document.body.appendChild(div.firstElementChild);
      });
  }
  // Add CSS
  if (!document.getElementById('objectives-css')) {
    const link = document.createElement('link');
    link.id = 'objectives-css';
    link.rel = 'stylesheet';
    link.href = 'src/ui/objectives.css';
    document.head.appendChild(link);
  }
}

/**
 * Updates the mission objective text.
 * @param {string} text
 */
export function updateObjective(text) {
  const el = document.getElementById('objective-text');
  if (el) el.textContent = text;
}

// --- 3D Waypoint Indicator ---
import * as THREE from 'three';

/**
 * Adds a 3D waypoint indicator to the scene at the given world position.
 * Returns the mesh for further updates/removal.
 * @param {THREE.Scene} scene
 * @param {THREE.Vector3} position
 */
export function addWaypointIndicator(scene, position) {
  const geometry = new THREE.TorusGeometry(8, 1.2, 16, 100);
  const material = new THREE.MeshBasicMaterial({ color: 0xffee00 });
  const mesh = new THREE.Mesh(geometry, material);
  mesh.position.copy(position);
  mesh.rotation.x = Math.PI / 2;
  scene.add(mesh);
  return mesh;
}

/**
 * Optionally, you can animate or remove the waypoint indicator as needed.
 */
